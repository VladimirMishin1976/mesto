<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./pages/index.css">
  <meta name="keywords" content="места России, города России, путешествие по России">
  <meta name="author" content="Анна Пантелеева">
  <title>Mesto Russia</title>
</head>
<body class="root">
  <div class="page">
    <header class="header">
      <div class="header__logo"></div>
    </header>
    <main class="main">
      <section class="profile">
        <div class="profile__avatar"></div>
        <div class="profile__info">
          <div class="profile__first-line">
            <h1 class="profile__name">Жак-Ив Кусто</h1>
            <button type="button" class="profile__edit"></button>
          </div>
          <p class="profile__job">Исследователь океана</p>
        </div>
        <button type="button" class="profile__add"></button>
      </section>
      <section class="elements">
        <ul class="elements__list">
          <template id="element">
          <li class="element">
            <button type="button" class="element__trash"></button>
            <img class="element__photo" src="#" alt="фото">
            <div class="element__title-container">
              <h2 class="element__title">Название</h2>
              <button type="button" class="element__like"></button>
            </div>
          </li>
          </template>
        </ul>
      </section>
    </main>
    <footer class="footer">
      <p class="footer__content">&#169; 2022 Mesto Russia</p>
    </footer>

    <div class="popup popup_edit">
      <form name="popup-edit" class="popup__container popup__container_edit">
        <button type="button" class="popup__close"></button>
        <div class="popup__wrapper">
          <h2 class="popup__definition">Редактировать профиль</h2>
          <input type="text" name="name" class="popup__text popup__text_value_name">
          <input type="text" name="job" class="popup__text popup__text_value_job">
          <button type="submit" class="popup__save"></button>
        </div>
      </form>
    </div>

    <div class="popup popup_add">
      <form name="popup-add" class="popup__container popup__container_add">
        <button type="button" class="popup__close"></button>
        <div class="popup__wrapper">
          <h2 class="popup__definition">Новое место</h2>
          <input type="text" name="place" class="popup__text popup__text_value_place" placeholder="Название">
          <input type="url" name="link" class="popup__text popup__text_value_link" placeholder="Ссылка на картинку">
          <button type="submit" class="popup__create"></button>
        </div>
      </form>
    </div>

    <div class="popup popup_image">
      <div class="popup__image-container">
        <button type="button" class="popup__close"></button>
        <img src="#" alt="#" class="popup__image-item">
        <p class="popup__image-name"></p>
      </div>
    </div>
  </div>

  <script>
// const editBtn = document.querySelector('.profile__edit');
// const popup = document.querySelector('.popup');
// const popupEdit = document.querySelector('.popup_edit-button');
// const closeBtn = popupEdit.querySelector('.popup__close');

// const nameInput = popupEdit.querySelector('.popup__text_value_name');
// const jobInput = popupEdit.querySelector('.popup__text_value_job');

// const getName = document.querySelector('.profile__name');
// const getJob = document.querySelector('.profile__job');

// const formElement = popup.querySelector('.popup__container');

// function openPopup() {
//   popup.classList.add('popup_opened');
//   nameInput.value = getName.textContent;
//   jobInput.value = getJob.textContent;
// }

// editBtn.addEventListener('click', openPopup);

// function closePopup() {
//   popup.classList.remove('popup_opened');
// }

// closeBtn.addEventListener('click', closePopup);

// function formSubmitHandler(evt) {
//   evt.preventDefault();
//   getName.textContent = nameInput.value;
//   getJob.textContent = jobInput.value;
//   closePopup();
// }

// formElement.addEventListener('submit', formSubmitHandler);

const initialCards = [
  {
    name: 'Архыз',
    link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg'
  },
  {
    name: 'Челябинская область',
    link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg'
  },
  {
    name: 'Иваново',
    link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg'
  },
  {
    name: 'Камчатка',
    link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg'
  },
  {
    name: 'Холмогорский район',
    link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg'
  },
  {
    name: 'Байкал',
    link: 'https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg'
  }
];

// пункт 1. Добавим данные на лендинг
const elementTemplate = document.querySelector('#element').content;
const elements = document.querySelector('.elements__list');
const element = document.querySelector('.element');

// initialCards.forEach(function (item) {
//   const card = elementTemplate.cloneNode(true);
//   card.querySelector('.element__title').textContent = item.name;
//   card.querySelector('.element__photo').src = item.link;
//   elements.append(card);
// });
function renderItems() {
  initialCards.forEach(renderItem);
}
 ()

// пункт 2. Сделаем форму add
// попапы
const popup = document.querySelector('.popup');
const popupEdit = document.querySelector('.popup_edit');
const popupAdd = document.querySelector('.popup_add');
// кнопки
const editBtn = document.querySelector('.profile__edit');
const addBtn = document.querySelector('.profile__add');
const closeBtn = document.querySelectorAll('.popup__close');
// инпуты edit
const nameInput = popupEdit.querySelector('.popup__text_value_name');
const jobInput = popupEdit.querySelector('.popup__text_value_job');
const getName = document.querySelector('.profile__name');
const getJob = document.querySelector('.profile__job');
// функции
function openPopup(popup) {
  popup.classList.add('popup_opened');
  nameInput.value = getName.textContent;
  jobInput.value = getJob.textContent;
};
function closePopup(popup) {
  popup.classList.remove('popup_opened');
};

// слушатели на кнопки
editBtn.addEventListener('click', () => {openPopup(popupEdit)});
addBtn.addEventListener('click', () => {openPopup(popupAdd)});
closeBtn.forEach((item) => {
  const popup = item.closest('.popup');
  item.addEventListener('click', () => {closePopup(popup)});
});

// добавим сабмит на edit

function editFormSubmitHandler(evt) {
  evt.preventDefault();
  getName.textContent = nameInput.value;
  getJob.textContent = jobInput.value;
  closePopup(popup);
};

document.querySelector('.popup__container').addEventListener('submit', editFormSubmitHandler);

// пункт 3-6. добавляем карточки из формы на страницу
function createItem(newItem) {
  const card = elementTemplate.querySelector('.element').cloneNode(true);
  console.log(card)
  card.querySelector('.element__title').textContent = newItem.name;
  card.querySelector('.element__photo').src = newItem.link;
  elements.append(card);

  card.querySelector('.element__like').addEventListener('click', (evt) => {
    evt.target.classList.toggle('.element__like_active');
  });

  card.querySelector('.element__trash').addEventListener('click', (evt) => {
  evt.target.closest('.element').remove();
  });

  // тут реализовать третий попап

  return card;
};

function renderItem(card) {
  elements.prepend(createItem(card));
};

// инпуты add
const placeInput = popupAdd.querySelector('.popup__text_value_place');
const linkInput = popupAdd.querySelector('.popup__text_value_link');
const getPlace = document.querySelector('.element__title');
const getLink = document.querySelector('.element__photo');


// добавим сабмит на add
function addFormSubmitHandler(evt) {
  evt.preventDefault();
  getPlace.textContent = placeInput.value;
  getLink.src = linkInput.value;
  closePopup(popup);
  renderItem(card);
};

document.querySelector('.popup__container_add').addEventListener('submit', addFormSubmitHandler);

  </script>

</body>
</html>
